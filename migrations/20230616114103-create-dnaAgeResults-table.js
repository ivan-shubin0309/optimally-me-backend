'use strict';

module.exports = {
  up(queryInterface) {
    return queryInterface.sequelize.query(`
      CREATE TABLE IF NOT EXISTS dnaAgeResults (
        id INTEGER AUTO_INCREMENT,
        
        sampleId INTEGER NOT NULL,
        userId INTEGER NOT NULL,

        noMissingPerSample DECIMAL(10, 2) NULL,
        meanMethBySample DECIMAL(10, 2) NULL,
        minMethBySample DECIMAL(10, 2) NULL,
        maxMethBySample DECIMAL(10, 2) NULL,
        corSampleVSgoldstandard DECIMAL(10, 2) NULL,
        meanAbsDifferenceSampleVSgoldstandard DECIMAL(10, 2) NULL,
        meanXchromosome DECIMAL(10, 2) NULL,
        isGenderOutlier BOOLEAN NULL,
        isIACOutlier BOOLEAN NULL,
        fractionFailed DECIMAL(10, 2) NULL,
        DNAmAge DECIMAL(10, 2) NULL,
        DNAmPhenoAge DECIMAL(10, 2) NULL,
        DNAmAgeSkinBloodClock DECIMAL(10, 2) NULL,
        DNAmGrimAge DECIMAL(10, 2) NULL,
        IEAA DECIMAL(10, 2) NULL,
        DNAmGrimAge2 DECIMAL(10, 2) NULL,
        DNAmGrimAge2_Tuned DECIMAL(10, 2) NULL,
        DNAmFitAge DECIMAL(10, 2) NULL,
        CD8T DECIMAL(10, 2) NULL,
        CD4T DECIMAL(10, 2) NULL,
        NK DECIMAL(10, 2) NULL,
        Bcell DECIMAL(10, 2) NULL,
        Mono DECIMAL(10, 2) NULL,
        Gran DECIMAL(10, 2) NULL,
        PlasmaBlast DECIMAL(10, 2) NULL,
        CD8pCD28nCD45RAn DECIMAL(10, 2) NULL,
        \`CD8.naive\` DECIMAL(10, 2) NULL,
        \`CD4.naive\` DECIMAL(10, 2) NULL,
        predictedTissue VARCHAR(255) NULL,
        DNAmTL DECIMAL(10, 2) NULL,
        predictedGender VARCHAR(255) NULL,
        predictedEthnicity VARCHAR(255) NULL,
        DNAmADM DECIMAL(10, 2) NULL,
        DNAmB2M DECIMAL(10, 2) NULL,
        DNAmCystatinC DECIMAL(10, 2) NULL,
        DNAmGDF15 DECIMAL(10, 2) NULL,
        DNAmLeptin DECIMAL(10, 2) NULL,
        DNAmPACKYRS DECIMAL(10, 2) NULL,
        DNAmPAI1 DECIMAL(10, 2) NULL,
        DNAmTIMP1 DECIMAL(10, 2) NULL,
        DNAmGDF_15 DECIMAL(10, 2) NULL,
        DNAmEFEMP1 DECIMAL(10, 2) NULL,
        DNAmCystatin_C DECIMAL(10, 2) NULL,
        DNAmTIMP_1 DECIMAL(10, 2) NULL,
        DNAmcd56 DECIMAL(10, 2) NULL,
        DNAmpai_1 DECIMAL(10, 2) NULL,
        DNAmtemp DECIMAL(10, 2) NULL,
        DNAmADM_Zscore DECIMAL(10, 2) NULL,
        DNAmAge_Zscore DECIMAL(10, 2) NULL,
        DNAmB2M_Zscore DECIMAL(10, 2) NULL,
        DNAmCystatinC_Zscore DECIMAL(10, 2) NULL,
        DNAmGDF15_Zscore DECIMAL(10, 2) NULL,
        DNAmLeptin_Zscore DECIMAL(10, 2) NULL,
        DNAmPACKYRS_Zscore DECIMAL(10, 2) NULL,
        DNAmPAI1_Zscore DECIMAL(10, 2) NULL,
        DNAmTIMP1_Zscore DECIMAL(10, 2) NULL,
        DNAmADM_percentile DECIMAL(10, 2) NULL,
        DNAmB2M_percentile DECIMAL(10, 2) NULL,
        DNAmCystatinC_percentile DECIMAL(10, 2) NULL,
        DNAmGDF15_percentile DECIMAL(10, 2) NULL,
        DNAmLeptin_percentile DECIMAL(10, 2) NULL,
        DNAmPACKYRS_percentile DECIMAL(10, 2) NULL,
        DNAmPAI1_percentile DECIMAL(10, 2) NULL,
        DNAmTIMP1_percentile DECIMAL(10, 2) NULL,
        DNAmAgeSkinBloodClock_Zscore DECIMAL(10, 2) NULL,
        DNAmGrimAge_Zscore DECIMAL(10, 2) NULL,
        DNAmGrimAge2_Tuned_Zscore DECIMAL(10, 2) NULL,
        DNAmGrimAge2_Zscore DECIMAL(10, 2) NULL,
        DNAmPhenoAge_Zscore DECIMAL(10, 2) NULL,
        DNAmGrimAge_percentile DECIMAL(10, 2) NULL,
        DNAmGrimAge2_Tuned_percentile DECIMAL(10, 2) NULL,
        DNAmGrimAge2_percentile DECIMAL(10, 2) NULL,
        AgeAccelGrim DECIMAL(10, 2) NULL,
        AgeAccelPheno DECIMAL(10, 2) NULL,

        createdAt DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
        updatedAt DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY sample (sampleId) REFERENCES samples (id) ON DELETE CASCADE ON UPDATE CASCADE, 
        FOREIGN KEY user (userId) REFERENCES users (id) ON DELETE CASCADE ON UPDATE CASCADE, 
        PRIMARY KEY (id)
      ) ENGINE=INNODB CHARACTER SET=UTF8MB4 COLLATE UTF8MB4_UNICODE_CI;`);
  },
  down(queryInterface) {
    return queryInterface.sequelize.query('DROP TABLE IF EXISTS dnaAgeResults;');
  }
};
